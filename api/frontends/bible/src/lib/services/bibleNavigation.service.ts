import { bibleDB } from '../storer/bible.db';
import { chapterApi } from '../api/chapters.api';
import { bibleLocationReferenceService } from './bibleLocationReference.service';

var chapters: string[] = [
	'1_1',
	'1_2',
	'1_3',
	'1_4',
	'1_5',
	'1_6',
	'1_7',
	'1_8',
	'1_9',
	'1_10',
	'1_11',
	'1_12',
	'1_13',
	'1_14',
	'1_15',
	'1_16',
	'1_17',
	'1_18',
	'1_19',
	'1_20',
	'1_21',
	'1_22',
	'1_23',
	'1_24',
	'1_25',
	'1_26',
	'1_27',
	'1_28',
	'1_29',
	'1_30',
	'1_31',
	'1_32',
	'1_33',
	'1_34',
	'1_35',
	'1_36',
	'1_37',
	'1_38',
	'1_39',
	'1_40',
	'1_41',
	'1_42',
	'1_43',
	'1_44',
	'1_45',
	'1_46',
	'1_47',
	'1_48',
	'1_49',
	'1_50',
	'2_1',
	'2_2',
	'2_3',
	'2_4',
	'2_5',
	'2_6',
	'2_7',
	'2_8',
	'2_9',
	'2_10',
	'2_11',
	'2_12',
	'2_13',
	'2_14',
	'2_15',
	'2_16',
	'2_17',
	'2_18',
	'2_19',
	'2_20',
	'2_21',
	'2_22',
	'2_23',
	'2_24',
	'2_25',
	'2_26',
	'2_27',
	'2_28',
	'2_29',
	'2_30',
	'2_31',
	'2_32',
	'2_33',
	'2_34',
	'2_35',
	'2_36',
	'2_37',
	'2_38',
	'2_39',
	'2_40',
	'3_1',
	'3_2',
	'3_3',
	'3_4',
	'3_5',
	'3_6',
	'3_7',
	'3_8',
	'3_9',
	'3_10',
	'3_11',
	'3_12',
	'3_13',
	'3_14',
	'3_15',
	'3_16',
	'3_17',
	'3_18',
	'3_19',
	'3_20',
	'3_21',
	'3_22',
	'3_23',
	'3_24',
	'3_25',
	'3_26',
	'3_27',
	'4_1',
	'4_2',
	'4_3',
	'4_4',
	'4_5',
	'4_6',
	'4_7',
	'4_8',
	'4_9',
	'4_10',
	'4_11',
	'4_12',
	'4_13',
	'4_14',
	'4_15',
	'4_16',
	'4_17',
	'4_18',
	'4_19',
	'4_20',
	'4_21',
	'4_22',
	'4_23',
	'4_24',
	'4_25',
	'4_26',
	'4_27',
	'4_28',
	'4_29',
	'4_30',
	'4_31',
	'4_32',
	'4_33',
	'4_34',
	'4_35',
	'4_36',
	'5_1',
	'5_2',
	'5_3',
	'5_4',
	'5_5',
	'5_6',
	'5_7',
	'5_8',
	'5_9',
	'5_10',
	'5_11',
	'5_12',
	'5_13',
	'5_14',
	'5_15',
	'5_16',
	'5_17',
	'5_18',
	'5_19',
	'5_20',
	'5_21',
	'5_22',
	'5_23',
	'5_24',
	'5_25',
	'5_26',
	'5_27',
	'5_28',
	'5_29',
	'5_30',
	'5_31',
	'5_32',
	'5_33',
	'5_34',
	'6_1',
	'6_2',
	'6_3',
	'6_4',
	'6_5',
	'6_6',
	'6_7',
	'6_8',
	'6_9',
	'6_10',
	'6_11',
	'6_12',
	'6_13',
	'6_14',
	'6_15',
	'6_16',
	'6_17',
	'6_18',
	'6_19',
	'6_20',
	'6_21',
	'6_22',
	'6_23',
	'6_24',
	'7_1',
	'7_2',
	'7_3',
	'7_4',
	'7_5',
	'7_6',
	'7_7',
	'7_8',
	'7_9',
	'7_10',
	'7_11',
	'7_12',
	'7_13',
	'7_14',
	'7_15',
	'7_16',
	'7_17',
	'7_18',
	'7_19',
	'7_20',
	'7_21',
	'8_1',
	'8_2',
	'8_3',
	'8_4',
	'9_1',
	'9_2',
	'9_3',
	'9_4',
	'9_5',
	'9_6',
	'9_7',
	'9_8',
	'9_9',
	'9_10',
	'9_11',
	'9_12',
	'9_13',
	'9_14',
	'9_15',
	'9_16',
	'9_17',
	'9_18',
	'9_19',
	'9_20',
	'9_21',
	'9_22',
	'9_23',
	'9_24',
	'9_25',
	'9_26',
	'9_27',
	'9_28',
	'9_29',
	'9_30',
	'9_31',
	'10_1',
	'10_2',
	'10_3',
	'10_4',
	'10_5',
	'10_6',
	'10_7',
	'10_8',
	'10_9',
	'10_10',
	'10_11',
	'10_12',
	'10_13',
	'10_14',
	'10_15',
	'10_16',
	'10_17',
	'10_18',
	'10_19',
	'10_20',
	'10_21',
	'10_22',
	'10_23',
	'10_24',
	'11_1',
	'11_2',
	'11_3',
	'11_4',
	'11_5',
	'11_6',
	'11_7',
	'11_8',
	'11_9',
	'11_10',
	'11_11',
	'11_12',
	'11_13',
	'11_14',
	'11_15',
	'11_16',
	'11_17',
	'11_18',
	'11_19',
	'11_20',
	'11_21',
	'11_22',
	'12_1',
	'12_2',
	'12_3',
	'12_4',
	'12_5',
	'12_6',
	'12_7',
	'12_8',
	'12_9',
	'12_10',
	'12_11',
	'12_12',
	'12_13',
	'12_14',
	'12_15',
	'12_16',
	'12_17',
	'12_18',
	'12_19',
	'12_20',
	'12_21',
	'12_22',
	'12_23',
	'12_24',
	'12_25',
	'13_1',
	'13_2',
	'13_3',
	'13_4',
	'13_5',
	'13_6',
	'13_7',
	'13_8',
	'13_9',
	'13_10',
	'13_11',
	'13_12',
	'13_13',
	'13_14',
	'13_15',
	'13_16',
	'13_17',
	'13_18',
	'13_19',
	'13_20',
	'13_21',
	'13_22',
	'13_23',
	'13_24',
	'13_25',
	'13_26',
	'13_27',
	'13_28',
	'13_29',
	'14_1',
	'14_2',
	'14_3',
	'14_4',
	'14_5',
	'14_6',
	'14_7',
	'14_8',
	'14_9',
	'14_10',
	'14_11',
	'14_12',
	'14_13',
	'14_14',
	'14_15',
	'14_16',
	'14_17',
	'14_18',
	'14_19',
	'14_20',
	'14_21',
	'14_22',
	'14_23',
	'14_24',
	'14_25',
	'14_26',
	'14_27',
	'14_28',
	'14_29',
	'14_30',
	'14_31',
	'14_32',
	'14_33',
	'14_34',
	'14_35',
	'14_36',
	'15_1',
	'15_2',
	'15_3',
	'15_4',
	'15_5',
	'15_6',
	'15_7',
	'15_8',
	'15_9',
	'15_10',
	'16_1',
	'16_2',
	'16_3',
	'16_4',
	'16_5',
	'16_6',
	'16_7',
	'16_8',
	'16_9',
	'16_10',
	'16_11',
	'16_12',
	'16_13',
	'19_1',
	'19_2',
	'19_3',
	'19_4',
	'19_5',
	'19_6',
	'19_7',
	'19_8',
	'19_9',
	'19_10',
	'22_1',
	'22_2',
	'22_3',
	'22_4',
	'22_5',
	'22_6',
	'22_7',
	'22_8',
	'22_9',
	'22_10',
	'22_11',
	'22_12',
	'22_13',
	'22_14',
	'22_15',
	'22_16',
	'22_17',
	'22_18',
	'22_19',
	'22_20',
	'22_21',
	'22_22',
	'22_23',
	'22_24',
	'22_25',
	'22_26',
	'22_27',
	'22_28',
	'22_29',
	'22_30',
	'22_31',
	'22_32',
	'22_33',
	'22_34',
	'22_35',
	'22_36',
	'22_37',
	'22_38',
	'22_39',
	'22_40',
	'22_41',
	'22_42',
	'23_1',
	'23_2',
	'23_3',
	'23_4',
	'23_5',
	'23_6',
	'23_7',
	'23_8',
	'23_9',
	'23_10',
	'23_11',
	'23_12',
	'23_13',
	'23_14',
	'23_15',
	'23_16',
	'23_17',
	'23_18',
	'23_19',
	'23_20',
	'23_21',
	'23_22',
	'23_23',
	'23_24',
	'23_25',
	'23_26',
	'23_27',
	'23_28',
	'23_29',
	'23_30',
	'23_31',
	'23_32',
	'23_33',
	'23_34',
	'23_35',
	'23_36',
	'23_37',
	'23_38',
	'23_39',
	'23_40',
	'23_41',
	'23_42',
	'23_43',
	'23_44',
	'23_45',
	'23_46',
	'23_47',
	'23_48',
	'23_49',
	'23_50',
	'23_51',
	'23_52',
	'23_53',
	'23_54',
	'23_55',
	'23_56',
	'23_57',
	'23_58',
	'23_59',
	'23_60',
	'23_61',
	'23_62',
	'23_63',
	'23_64',
	'23_65',
	'23_66',
	'23_67',
	'23_68',
	'23_69',
	'23_70',
	'23_71',
	'23_72',
	'23_73',
	'23_74',
	'23_75',
	'23_76',
	'23_77',
	'23_78',
	'23_79',
	'23_80',
	'23_81',
	'23_82',
	'23_83',
	'23_84',
	'23_85',
	'23_86',
	'23_87',
	'23_88',
	'23_89',
	'23_90',
	'23_91',
	'23_92',
	'23_93',
	'23_94',
	'23_95',
	'23_96',
	'23_97',
	'23_98',
	'23_99',
	'23_100',
	'23_101',
	'23_102',
	'23_103',
	'23_104',
	'23_105',
	'23_106',
	'23_107',
	'23_108',
	'23_109',
	'23_110',
	'23_111',
	'23_112',
	'23_113',
	'23_114',
	'23_115',
	'23_116',
	'23_117',
	'23_118',
	'23_119',
	'23_120',
	'23_121',
	'23_122',
	'23_123',
	'23_124',
	'23_125',
	'23_126',
	'23_127',
	'23_128',
	'23_129',
	'23_130',
	'23_131',
	'23_132',
	'23_133',
	'23_134',
	'23_135',
	'23_136',
	'23_137',
	'23_138',
	'23_139',
	'23_140',
	'23_141',
	'23_142',
	'23_143',
	'23_144',
	'23_145',
	'23_146',
	'23_147',
	'23_148',
	'23_149',
	'23_150',
	'24_1',
	'24_2',
	'24_3',
	'24_4',
	'24_5',
	'24_6',
	'24_7',
	'24_8',
	'24_9',
	'24_10',
	'24_11',
	'24_12',
	'24_13',
	'24_14',
	'24_15',
	'24_16',
	'24_17',
	'24_18',
	'24_19',
	'24_20',
	'24_21',
	'24_22',
	'24_23',
	'24_24',
	'24_25',
	'24_26',
	'24_27',
	'24_28',
	'24_29',
	'24_30',
	'24_31',
	'25_1',
	'25_2',
	'25_3',
	'25_4',
	'25_5',
	'25_6',
	'25_7',
	'25_8',
	'25_9',
	'25_10',
	'25_11',
	'25_12',
	'26_1',
	'26_2',
	'26_3',
	'26_4',
	'26_5',
	'26_6',
	'26_7',
	'26_8',
	'29_1',
	'29_2',
	'29_3',
	'29_4',
	'29_5',
	'29_6',
	'29_7',
	'29_8',
	'29_9',
	'29_10',
	'29_11',
	'29_12',
	'29_13',
	'29_14',
	'29_15',
	'29_16',
	'29_17',
	'29_18',
	'29_19',
	'29_20',
	'29_21',
	'29_22',
	'29_23',
	'29_24',
	'29_25',
	'29_26',
	'29_27',
	'29_28',
	'29_29',
	'29_30',
	'29_31',
	'29_32',
	'29_33',
	'29_34',
	'29_35',
	'29_36',
	'29_37',
	'29_38',
	'29_39',
	'29_40',
	'29_41',
	'29_42',
	'29_43',
	'29_44',
	'29_45',
	'29_46',
	'29_47',
	'29_48',
	'29_49',
	'29_50',
	'29_51',
	'29_52',
	'29_53',
	'29_54',
	'29_55',
	'29_56',
	'29_57',
	'29_58',
	'29_59',
	'29_60',
	'29_61',
	'29_62',
	'29_63',
	'29_64',
	'29_65',
	'29_66',
	'30_1',
	'30_2',
	'30_3',
	'30_4',
	'30_5',
	'30_6',
	'30_7',
	'30_8',
	'30_9',
	'30_10',
	'30_11',
	'30_12',
	'30_13',
	'30_14',
	'30_15',
	'30_16',
	'30_17',
	'30_18',
	'30_19',
	'30_20',
	'30_21',
	'30_22',
	'30_23',
	'30_24',
	'30_25',
	'30_26',
	'30_27',
	'30_28',
	'30_29',
	'30_30',
	'30_31',
	'30_32',
	'30_33',
	'30_34',
	'30_35',
	'30_36',
	'30_37',
	'30_38',
	'30_39',
	'30_40',
	'30_41',
	'30_42',
	'30_43',
	'30_44',
	'30_45',
	'30_46',
	'30_47',
	'30_48',
	'30_49',
	'30_50',
	'30_51',
	'30_52',
	'31_1',
	'31_2',
	'31_3',
	'31_4',
	'31_5',
	'33_1',
	'33_2',
	'33_3',
	'33_4',
	'33_5',
	'33_6',
	'33_7',
	'33_8',
	'33_9',
	'33_10',
	'33_11',
	'33_12',
	'33_13',
	'33_14',
	'33_15',
	'33_16',
	'33_17',
	'33_18',
	'33_19',
	'33_20',
	'33_21',
	'33_22',
	'33_23',
	'33_24',
	'33_25',
	'33_26',
	'33_27',
	'33_28',
	'33_29',
	'33_30',
	'33_31',
	'33_32',
	'33_33',
	'33_34',
	'33_35',
	'33_36',
	'33_37',
	'33_38',
	'33_39',
	'33_40',
	'33_41',
	'33_42',
	'33_43',
	'33_44',
	'33_45',
	'33_46',
	'33_47',
	'33_48',
	'34_1',
	'34_2',
	'34_3',
	'34_4',
	'34_5',
	'34_6',
	'34_7',
	'34_8',
	'34_9',
	'34_10',
	'34_11',
	'34_12',
	'35_1',
	'35_2',
	'35_3',
	'35_4',
	'35_5',
	'35_6',
	'35_7',
	'35_8',
	'35_9',
	'35_10',
	'35_11',
	'35_12',
	'35_13',
	'35_14',
	'36_1',
	'36_2',
	'36_3',
	'37_1',
	'37_2',
	'37_3',
	'37_4',
	'37_5',
	'37_6',
	'37_7',
	'37_8',
	'37_9',
	'38_1',
	'39_1',
	'39_2',
	'39_3',
	'39_4',
	'40_1',
	'40_2',
	'40_3',
	'40_4',
	'40_5',
	'40_6',
	'40_7',
	'41_1',
	'41_2',
	'41_3',
	'42_1',
	'42_2',
	'42_3',
	'43_1',
	'43_2',
	'43_3',
	'44_1',
	'44_2',
	'45_1',
	'45_2',
	'45_3',
	'45_4',
	'45_5',
	'45_6',
	'45_7',
	'45_8',
	'45_9',
	'45_10',
	'45_11',
	'45_12',
	'45_13',
	'45_14',
	'46_1',
	'46_2',
	'46_3',
	'46_4',
	'47_1',
	'47_2',
	'47_3',
	'47_4',
	'47_5',
	'47_6',
	'47_7',
	'47_8',
	'47_9',
	'47_10',
	'47_11',
	'47_12',
	'47_13',
	'47_14',
	'47_15',
	'47_16',
	'47_17',
	'47_18',
	'47_19',
	'47_20',
	'47_21',
	'47_22',
	'47_23',
	'47_24',
	'47_25',
	'47_26',
	'47_27',
	'47_28',
	'48_1',
	'48_2',
	'48_3',
	'48_4',
	'48_5',
	'48_6',
	'48_7',
	'48_8',
	'48_9',
	'48_10',
	'48_11',
	'48_12',
	'48_13',
	'48_14',
	'48_15',
	'48_16',
	'49_1',
	'49_2',
	'49_3',
	'49_4',
	'49_5',
	'49_6',
	'49_7',
	'49_8',
	'49_9',
	'49_10',
	'49_11',
	'49_12',
	'49_13',
	'49_14',
	'49_15',
	'49_16',
	'49_17',
	'49_18',
	'49_19',
	'49_20',
	'49_21',
	'49_22',
	'49_23',
	'49_24',
	'50_1',
	'50_2',
	'50_3',
	'50_4',
	'50_5',
	'50_6',
	'50_7',
	'50_8',
	'50_9',
	'50_10',
	'50_11',
	'50_12',
	'50_13',
	'50_14',
	'50_15',
	'50_16',
	'50_17',
	'50_18',
	'50_19',
	'50_20',
	'50_21',
	'51_1',
	'51_2',
	'51_3',
	'51_4',
	'51_5',
	'51_6',
	'51_7',
	'51_8',
	'51_9',
	'51_10',
	'51_11',
	'51_12',
	'51_13',
	'51_14',
	'51_15',
	'51_16',
	'51_17',
	'51_18',
	'51_19',
	'51_20',
	'51_21',
	'51_22',
	'51_23',
	'51_24',
	'51_25',
	'51_26',
	'51_27',
	'51_28',
	'52_1',
	'52_2',
	'52_3',
	'52_4',
	'52_5',
	'52_6',
	'52_7',
	'52_8',
	'52_9',
	'52_10',
	'52_11',
	'52_12',
	'52_13',
	'52_14',
	'52_15',
	'52_16',
	'53_1',
	'53_2',
	'53_3',
	'53_4',
	'53_5',
	'53_6',
	'53_7',
	'53_8',
	'53_9',
	'53_10',
	'53_11',
	'53_12',
	'53_13',
	'53_14',
	'53_15',
	'53_16',
	'54_1',
	'54_2',
	'54_3',
	'54_4',
	'54_5',
	'54_6',
	'54_7',
	'54_8',
	'54_9',
	'54_10',
	'54_11',
	'54_12',
	'54_13',
	'55_1',
	'55_2',
	'55_3',
	'55_4',
	'55_5',
	'55_6',
	'56_1',
	'56_2',
	'56_3',
	'56_4',
	'56_5',
	'56_6',
	'57_1',
	'57_2',
	'57_3',
	'57_4',
	'58_1',
	'58_2',
	'58_3',
	'58_4',
	'59_1',
	'59_2',
	'59_3',
	'59_4',
	'59_5',
	'60_1',
	'60_2',
	'60_3',
	'61_1',
	'61_2',
	'61_3',
	'61_4',
	'61_5',
	'61_6',
	'62_1',
	'62_2',
	'62_3',
	'62_4',
	'63_1',
	'63_2',
	'63_3',
	'64_1',
	'65_1',
	'65_2',
	'65_3',
	'65_4',
	'65_5',
	'65_6',
	'65_7',
	'65_8',
	'65_9',
	'65_10',
	'65_11',
	'65_12',
	'65_13',
	'66_1',
	'66_2',
	'66_3',
	'66_4',
	'66_5',
	'67_1',
	'67_2',
	'67_3',
	'67_4',
	'67_5',
	'68_1',
	'68_2',
	'68_3',
	'69_1',
	'69_2',
	'69_3',
	'69_4',
	'69_5',
	'70_1',
	'71_1',
	'72_1',
	'73_1',
	'73_2',
	'73_3',
	'73_4',
	'73_5',
	'73_6',
	'73_7',
	'73_8',
	'73_9',
	'73_10',
	'73_11',
	'73_12',
	'73_13',
	'73_14',
	'73_15',
	'73_16',
	'73_17',
	'73_18',
	'73_19',
	'73_20',
	'73_21',
	'73_22'
];

export class BibleNavigationService {
	chapterList: string[];
	bookNames: any;
	subscribers: any[] = [];

	constructor() {
		this.chapterList = chapters;
	}

	subscribe(id: string, fn: any) {
		this.subscribers.push({ id: id, fn: fn });
	}

	next(bibleLocationRef: string): string {
		bibleLocationRef =
			bibleLocationReferenceService.extractBookChapter(bibleLocationRef);
		let ci = this.chapterList.indexOf(bibleLocationRef);
		if (ci + 1 >= this.chapterList.length) {
			return this.chapterList[0];
		} else {
			return this.chapterList[ci + 1];
		}
	}

	previous(bibleLocationRef: string): string {
		bibleLocationRef =
			bibleLocationReferenceService.extractBookChapter(bibleLocationRef);
		let ci = this.chapterList.indexOf(bibleLocationRef);
		if (ci - 1 < 0) {
			return this.chapterList[this.chapterList.length - 1];
		} else {
			return this.chapterList[ci - 1];
		}
	}

	async publish(idKey: any) {
		this.subscribers.forEach((s) => {
			s.fn(idKey);
		});
	}
	async goto(shortBook: string, chapter: string) {
		if (!this.bookNames) {
			await chapterApi.getChapter('booknames').then((data: any) => {
				this.bookNames = data;
			});
		}
		for (const [key, value] of Object.entries(this.bookNames['shortNames'])) {
			if (shortBook.toLowerCase() === (value as string).toLowerCase()) {
				return key + '_' + chapter;
			}
		}
	}
}

export let bibleNavigationService = new BibleNavigationService();
